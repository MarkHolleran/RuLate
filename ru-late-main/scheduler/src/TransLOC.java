import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;


public class TransLOC {

	private static JSONArray stops;
	private static JSONArray routes;
	
	private static List<ArrivalNode> arrivalNodes = new ArrayList<>();
	
	static {
		try {
			stops = new JSONObject("{\"routes\": [{\"id\": 4012650, \"stops\": [4259014, 4229620, 4229496, 4259016, 4259018, 4259062, 4229570, 4254110, 4229696, 4259030, 4229596, 4259054, 4259722, 4259058, 4253700, 4253718]}, {\"id\": 4012652, \"stops\": [4259014, 4229620, 4259050, 4259030, 4229596, 4259054, 4259722, 4259058, 4253700, 4229496, 4229570, 4254110, 4259062, 4259048, 4231636]}, {\"id\": 4012654, \"stops\": [4259014, 4229620, 4229496, 4259016, 4259018, 4259062, 4229570, 4254110, 4266590, 4229696, 4259030, 4229596, 4259054, 4259722, 4259058, 4253700, 4253718]}, {\"id\": 4014494, \"stops\": [4253760, 4253756, 4253738, 4253724, 4253732, 4253722, 4253742, 4253758, 4253726]}, {\"id\": 4014496, \"stops\": [4253754, 4253734, 4253730, 4253768, 4253770, 4253766, 4253762, 4253728, 4253758, 4253742, 4253724]}, {\"id\": 4014500, \"stops\": [4253760, 4253754, 4253738]}, {\"id\": 4014502, \"stops\": [4253728, 4253754, 4253730, 4253768]}, {\"id\": 4014504, \"stops\": [4253728, 4253772, 4253720, 4253730, 4253768, 4253770, 4253762]}, {\"id\": 4014506, \"stops\": [4253760, 4253730, 4253768, 4253770, 4253762, 4253772, 4253728, 4253720]}, {\"id\": 4014858, \"stops\": [4259072, 4259074, 4259076, 4259078, 4259082, 4259080]}, {\"id\": 4014958, \"stops\": [4254110, 4266590, 4259046, 4259062, 4259048, 4231636, 4229570, 4259016]}, {\"id\": 4014962, \"stops\": [4259010, 4259016, 4259048, 4231636]}, {\"id\": 4015030, \"stops\": [4259062, 4259048, 4231636, 4259010, 4259014, 4229620, 4229496, 4259040, 4268596]}, {\"id\": 4015032, \"stops\": [4259014, 4229620, 4229496, 4259010, 4259016, 4259018, 4259062, 4259568, 4259040]}, {\"id\": 4015034, \"stops\": [4254110, 4266590, 4259016, 4259018, 4259062, 4229570]}, {\"id\": 4015036, \"stops\": [4259014, 4229620, 4259050, 4259030, 4229596, 4259054, 4259722, 4259058, 4253700, 4253718, 4229496]}, {\"id\": 4015038, \"stops\": [4259030, 4229596, 4253700, 4229496, 4229620]}, {\"id\": 4015040, \"stops\": [4259014, 4229620, 4229496, 4229570, 4254110, 4266590]}, {\"id\": 4015042, \"stops\": [4259030, 4229596, 4253700, 4259016, 4259048, 4231636]}, {\"id\": 4015044, \"stops\": [4259030, 4229596, 4253700, 4229570, 4254110]}, {\"id\": 4015178, \"stops\": [4259014, 4229620, 4229496, 4259016, 4259018, 4259062, 4229570, 4254110, 4266590, 4229696, 4259030, 4229596, 4259054, 4259722, 4259058, 4253700, 4253718]}, {\"id\": 4015180, \"stops\": [4259014, 4229620, 4259050, 4259030, 4229596, 4259054, 4259722, 4259058, 4253700, 4229496, 4229570, 4254110, 4266590, 4259062, 4259048, 4231636]}, {\"id\": 4015284, \"stops\": [4259014, 4229620, 4229496, 4259010, 4259016, 4259018, 4259062, 4259040]}, {\"id\": 4015286, \"stops\": [4254110, 4266590, 4259046, 4259062, 4259048, 4259016, 4229570]}, {\"id\": 4015288, \"stops\": [4259014, 4229620, 4259050, 4259030, 4229596, 4259054, 4259722, 4259058, 4253700, 4253718, 4229496]}, {\"id\": 4015290, \"stops\": [4259030, 4229596, 4253700, 4229496, 4229620]}, {\"id\": 4015292, \"stops\": [4259062, 4259048, 4231636, 4259010, 4259014, 4229620, 4229496, 4259568]}, {\"id\": 4015294, \"stops\": [4254110, 4259046, 4259014, 4229620, 4229496, 4229570]}, {\"id\": 4015298, \"stops\": [4254110, 4266590, 4259016, 4259018, 4259062, 4229570]}], \"stops\": [{\"code\": \"1001\", \"description\": \"\", \"id\": 4229496, \"location_type\": \"stop\", \"name\": \"Student Activities Center Northbound\", \"parent_station_id\": null, \"position\": [40.5039, -74.44883], \"url\": \"\"}, {\"code\": \"1028\", \"description\": \"\", \"id\": 4229570, \"location_type\": \"stop\", \"name\": \"Livingston Plaza\", \"parent_station_id\": null, \"position\": [40.525106, -74.438584], \"url\": \"\"}, {\"code\": \"1047\", \"description\": \"\", \"id\": 4229596, \"location_type\": \"stop\", \"name\": \"Lipman Hall\", \"parent_station_id\": null, \"position\": [40.481294, -74.436266], \"url\": \"\"}, {\"code\": \"1055\", \"description\": \"\", \"id\": 4229620, \"location_type\": \"stop\", \"name\": \"The Yard\", \"parent_station_id\": null, \"position\": [40.499616, -74.448202], \"url\": \"\"}, {\"code\": \"3014\", \"description\": \"\", \"id\": 4229696, \"location_type\": \"stop\", \"name\": \"Student Activities Center Southbound\", \"parent_station_id\": null, \"position\": [40.504249, -74.449742], \"url\": \"\"}, {\"code\": \"10040\", \"description\": \"\", \"id\": 4231636, \"location_type\": \"stop\", \"name\": \"Hill Center (SB)\", \"parent_station_id\": null, \"position\": [40.521872, -74.463417], \"url\": \"\"}, {\"code\": \"1052\", \"description\": \"\", \"id\": 4253700, \"location_type\": \"stop\", \"name\": \"College Hall\", \"parent_station_id\": null, \"position\": [40.485509, -74.437198], \"url\": \"\"}, {\"code\": \"1043\", \"description\": \"\", \"id\": 4253718, \"location_type\": \"stop\", \"name\": \"SoCam Apts NB\", \"parent_station_id\": null, \"position\": [40.492293, -74.44324], \"url\": \"\"}, {\"code\": \"2001\", \"description\": \"we assigned code\", \"id\": 4253722, \"location_type\": \"stop\", \"name\": \"180 W Market St\", \"parent_station_id\": null, \"position\": [40.741274, -74.186955], \"url\": \"\"}, {\"code\": \"2003\", \"description\": \"we assigned code\", \"id\": 4253724, \"location_type\": \"stop\", \"name\": \"Bergen Building\", \"parent_station_id\": null, \"position\": [40.743386, -74.191461], \"url\": \"\"}, {\"code\": \"2004\", \"description\": \"we assigned code\", \"id\": 4253726, \"location_type\": \"stop\", \"name\": \"Blumenthal Hall\", \"parent_station_id\": null, \"position\": [40.739281, -74.175143], \"url\": \"\"}, {\"code\": \"2005\", \"description\": \"we assigned code\", \"id\": 4253728, \"location_type\": \"stop\", \"name\": \"Boyden Hall\", \"parent_station_id\": null, \"position\": [40.740978, -74.174247], \"url\": \"\"}, {\"code\": \"2009\", \"description\": \"we assigned code\", \"id\": 4253730, \"location_type\": \"stop\", \"name\": \"CLJ\", \"parent_station_id\": null, \"position\": [40.741242, -74.172097], \"url\": \"\"}, {\"code\": \"2012\", \"description\": \"we assigned code\", \"id\": 4253732, \"location_type\": \"stop\", \"name\": \"Dental School\", \"parent_station_id\": null, \"position\": [40.742285, -74.190294], \"url\": \"\"}, {\"code\": \"2013\", \"description\": \"we assigned code\", \"id\": 4253734, \"location_type\": \"stop\", \"name\": \"ECC\", \"parent_station_id\": null, \"position\": [40.736597, -74.178506], \"url\": \"\"}, {\"code\": \"2015\", \"description\": \"we assigned code\", \"id\": 4253738, \"location_type\": \"stop\", \"name\": \"Hospital\", \"parent_station_id\": null, \"position\": [40.741868, -74.191581], \"url\": \"\"}, {\"code\": \"2017\", \"description\": \"we assigned code\", \"id\": 4253742, \"location_type\": \"stop\", \"name\": \"ICPH\", \"parent_station_id\": null, \"position\": [40.742787, -74.183882], \"url\": \"\"}, {\"code\": \"2025\", \"description\": \"we assigned code\", \"id\": 4253754, \"location_type\": \"stop\", \"name\": \"Medical School\", \"parent_station_id\": null, \"position\": [40.739719, -74.189567], \"url\": \"\"}, {\"code\": \"2026\", \"description\": \"we assigned code\", \"id\": 4253756, \"location_type\": \"stop\", \"name\": \"Medical School (Arrival)\", \"parent_station_id\": null, \"position\": [40.739686, -74.189452], \"url\": \"\"}, {\"code\": \"2027\", \"description\": \"we assigned code\", \"id\": 4253758, \"location_type\": \"stop\", \"name\": \"NJIT\", \"parent_station_id\": null, \"position\": [40.741192, -74.178811], \"url\": \"\"}, {\"code\": \"2028\", \"description\": \"we assigned code\", \"id\": 4253760, \"location_type\": \"stop\", \"name\": \"Penn Station\", \"parent_station_id\": null, \"position\": [40.734819, -74.164721], \"url\": \"\"}, {\"code\": \"2031\", \"description\": \"we assigned code\", \"id\": 4253762, \"location_type\": \"stop\", \"name\": \"Physical Plant\", \"parent_station_id\": null, \"position\": [40.744492, -74.172539], \"url\": \"\"}, {\"code\": \"2038\", \"description\": \"we assigned code\", \"id\": 4253766, \"location_type\": \"stop\", \"name\": \"University North\", \"parent_station_id\": null, \"position\": [40.746147, -74.17175], \"url\": \"\"}, {\"code\": \"2039\", \"description\": \"we assigned code\", \"id\": 4253768, \"location_type\": \"stop\", \"name\": \"Washington Park\", \"parent_station_id\": null, \"position\": [40.743789, -74.170569], \"url\": \"\"}, {\"code\": \"2044\", \"description\": \"we assigned code\", \"id\": 4253770, \"location_type\": \"stop\", \"name\": \"Broad St\", \"parent_station_id\": null, \"position\": [40.746906, -74.1711], \"url\": \"\"}, {\"code\": \"1058\", \"description\": \"\", \"id\": 4254110, \"location_type\": \"stop\", \"name\": \"Livingston Student Center\", \"parent_station_id\": null, \"position\": [40.524, -74.43663], \"url\": \"\"}, {\"code\": \"1002\", \"description\": \"\", \"id\": 4259010, \"location_type\": \"stop\", \"name\": \"Stadium West Lot\", \"parent_station_id\": null, \"position\": [40.514479, -74.466153], \"url\": \"\"}, {\"code\": \"10035\", \"description\": \"\", \"id\": 4259014, \"location_type\": \"stop\", \"name\": \"College Avenue Student Ctr\", \"parent_station_id\": null, \"position\": [40.503665, -74.452402], \"url\": \"\"}, {\"code\": \"1004\", \"description\": \"\", \"id\": 4259016, \"location_type\": \"stop\", \"name\": \"Hill Center (NB)\", \"parent_station_id\": null, \"position\": [40.52192, -74.463263], \"url\": \"\"}, {\"code\": \"1005\", \"description\": \"\", \"id\": 4259018, \"location_type\": \"stop\", \"name\": \"Sciences Building\", \"parent_station_id\": null, \"position\": [40.523938, -74.464221], \"url\": \"\"}, {\"code\": \"1011\", \"description\": \"\", \"id\": 4259030, \"location_type\": \"stop\", \"name\": \"Red Oak Lane\", \"parent_station_id\": null, \"position\": [40.482987, -74.437535], \"url\": \"\"}, {\"code\": \"1022\", \"description\": \"\", \"id\": 4259040, \"location_type\": \"stop\", \"name\": \"Werblin Recreation Center\", \"parent_station_id\": null, \"position\": [40.518637, -74.459854], \"url\": \"\"}, {\"code\": \"1034\", \"description\": \"\", \"id\": 4259046, \"location_type\": \"stop\", \"name\": \"Busch-Livingston Health Center\", \"parent_station_id\": null, \"position\": [40.523479, -74.442508], \"url\": \"\"}, {\"code\": \"1036\", \"description\": \"\", \"id\": 4259048, \"location_type\": \"stop\", \"name\": \"Allison Road Classrooms\", \"parent_station_id\": null, \"position\": [40.523612, -74.465127], \"url\": \"\"}, {\"code\": \"10430\", \"description\": \"\", \"id\": 4259050, \"location_type\": \"stop\", \"name\": \"SoCam Apts SB\", \"parent_station_id\": null, \"position\": [40.491856, -74.443093], \"url\": \"\"}, {\"code\": \"1048\", \"description\": \"\", \"id\": 4259054, \"location_type\": \"stop\", \"name\": \"Biel Road\", \"parent_station_id\": null, \"position\": [40.48, -74.432522], \"url\": \"\"}, {\"code\": \"1051\", \"description\": \"\", \"id\": 4259058, \"location_type\": \"stop\", \"name\": \"Gibbons\", \"parent_station_id\": null, \"position\": [40.48523, -74.43194], \"url\": \"\"}, {\"code\": \"1056\", \"description\": \"\", \"id\": 4259062, \"location_type\": \"stop\", \"name\": \"Busch Student Ctr\", \"parent_station_id\": null, \"position\": [40.523747, -74.458373], \"url\": \"\"}, {\"code\": \"3202\", \"description\": \"\", \"id\": 4259072, \"location_type\": \"stop\", \"name\": \"City Lot 15\", \"parent_station_id\": null, \"position\": [39.952097, -75.126481], \"url\": \"\"}, {\"code\": \"3203\", \"description\": \"\", \"id\": 4259074, \"location_type\": \"stop\", \"name\": \"City Lot 16\", \"parent_station_id\": null, \"position\": [39.953253, -75.125933], \"url\": \"\"}, {\"code\": \"3204\", \"description\": \"\", \"id\": 4259076, \"location_type\": \"stop\", \"name\": \"Law School\", \"parent_station_id\": null, \"position\": [39.947582, -75.120661], \"url\": \"\"}, {\"code\": \"3205\", \"description\": \"\", \"id\": 4259078, \"location_type\": \"stop\", \"name\": \"Nursing and Science Building [NSB]\", \"parent_station_id\": null, \"position\": [39.943979, -75.120531], \"url\": \"\"}, {\"code\": \"3206\", \"description\": \"\", \"id\": 4259080, \"location_type\": \"stop\", \"name\": \"Business and Science Building [BSB]\", \"parent_station_id\": null, \"position\": [39.948557, -75.123476], \"url\": \"\"}, {\"code\": \"4000\", \"description\": \"\", \"id\": 4259082, \"location_type\": \"stop\", \"name\": \"Joint Health Science Center\", \"parent_station_id\": null, \"position\": [39.941756, -75.119147], \"url\": \"\"}, {\"code\": \"10057\", \"description\": \"\", \"id\": 4259568, \"location_type\": \"stop\", \"name\": \"Werblin Main Entrance\", \"parent_station_id\": null, \"position\": [40.518798, -74.459984], \"url\": \"\"}, {\"code\": \"1050\", \"description\": \"\", \"id\": 4259722, \"location_type\": \"stop\", \"name\": \"Henderson\", \"parent_station_id\": null, \"position\": [40.48095, -74.42872], \"url\": \"\"}, {\"code\": \"3013\", \"description\": \"\", \"id\": 4261662, \"location_type\": \"stop\", \"name\": \"Public Safety Building on Commercial Southbound\", \"parent_station_id\": null, \"position\": [40.487913, -74.439383], \"url\": \"\"}, {\"code\": \"1030\", \"description\": \"\", \"id\": 4266590, \"location_type\": \"stop\", \"name\": \"Quads\", \"parent_station_id\": null, \"position\": [40.519863, -74.433567], \"url\": \"\"}, {\"code\": \"20180\", \"description\": \"\", \"id\": 4266814, \"location_type\": \"stop\", \"name\": \"New Street\", \"parent_station_id\": null, \"position\": [40.7437, -74.18132], \"url\": \"\"}, {\"code\": \"1009\", \"description\": \"\", \"id\": 4268596, \"location_type\": \"stop\", \"name\": \"Buell Apartments\", \"parent_station_id\": null, \"position\": [40.521807, -74.456701], \"url\": \"\"}], \"success\": true}").getJSONArray("stops");
			routes = new JSONObject("{\"routes\": [{\"agency_id\": 1323, \"bounds\": [40.48, -74.464221, 40.525106, -74.42872], \"color\": \"009999\", \"description\": \"\", \"id\": 4012650, \"is_active\": true, \"long_name\": \"Route Weekend 1\", \"short_name\": \"\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.48, -74.465127, 40.525106, -74.42872], \"color\": \"6A5ACD\", \"description\": \"\", \"id\": 4012652, \"is_active\": true, \"long_name\": \"Route Weekend 2\", \"short_name\": \"\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.48, -74.464221, 40.525106, -74.42872], \"color\": \"000000\", \"description\": \"\", \"id\": 4012654, \"is_active\": true, \"long_name\": \"Route All Campuses\", \"short_name\": \"\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.734819, -74.191581, 40.743386, -74.164721], \"color\": \"009900\", \"description\": \"\", \"id\": 4014494, \"is_active\": false, \"long_name\": \"Newark Penn Station\", \"short_name\": \"\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.736597, -74.191461, 40.746906, -74.170569], \"color\": \"BE2625\", \"description\": \"\", \"id\": 4014496, \"is_active\": false, \"long_name\": \"Newark Campus Connect\", \"short_name\": \"CC\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.734819, -74.191581, 40.741868, -74.164721], \"color\": \"FF5333\", \"description\": \"\", \"id\": 4014500, \"is_active\": false, \"long_name\": \"Newark Penn Station Express\", \"short_name\": \"\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.739719, -74.189567, 40.743789, -74.170569], \"color\": \"FF5333\", \"description\": \"\", \"id\": 4014502, \"is_active\": false, \"long_name\": \"Newark Campus Connect Express\", \"short_name\": \"\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": null, \"color\": \"A1D490\", \"description\": \"\", \"id\": 4014504, \"is_active\": false, \"long_name\": \"Newark Run Run Express\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": null, \"color\": \"90C3D4\", \"description\": \"\", \"id\": 4014506, \"is_active\": false, \"long_name\": \"Newark Run Run\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [39.941756, -75.126481, 39.953253, -75.119147], \"color\": \"FFF000\", \"description\": \"\", \"id\": 4014858, \"is_active\": false, \"long_name\": \"Camden Shuttle\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.519863, -74.465127, 40.525106, -74.433567], \"color\": \"00B0F0\", \"description\": \"\", \"id\": 4014958, \"is_active\": false, \"long_name\": \"Route B-He\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.514479, -74.466153, 40.523612, -74.463263], \"color\": \"000000\", \"description\": \"\", \"id\": 4014962, \"is_active\": false, \"long_name\": \"Route C\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.499616, -74.466153, 40.523747, -74.448202], \"color\": \"7030A0\", \"description\": \"\", \"id\": 4015030, \"is_active\": false, \"long_name\": \"Route H\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.499616, -74.466153, 40.523938, -74.448202], \"color\": \"8064A2\", \"description\": \"\", \"id\": 4015032, \"is_active\": false, \"long_name\": \"Route A\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.519863, -74.464221, 40.525106, -74.433567], \"color\": \"0070C0\", \"description\": \"\", \"id\": 4015034, \"is_active\": false, \"long_name\": \"Route B\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.48, -74.452402, 40.5039, -74.42872], \"color\": \"C00000\", \"description\": \"\", \"id\": 4015036, \"is_active\": false, \"long_name\": \"Route EE\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.481294, -74.44883, 40.5039, -74.436266], \"color\": \"FF0000\", \"description\": \"\", \"id\": 4015038, \"is_active\": false, \"long_name\": \"Route F\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.499616, -74.452402, 40.525106, -74.433567], \"color\": \"FFC000\", \"description\": \"\", \"id\": 4015040, \"is_active\": false, \"long_name\": \"Route LX\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.481294, -74.465127, 40.523612, -74.436266], \"color\": \"FFFF00\", \"description\": \"\", \"id\": 4015042, \"is_active\": false, \"long_name\": \"Route REXB\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.481294, -74.438584, 40.525106, -74.436266], \"color\": \"00B050\", \"description\": \"\", \"id\": 4015044, \"is_active\": false, \"long_name\": \"Route REXL\", \"short_name\": \"\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.48, -74.464221, 40.525106, -74.42872], \"color\": \"000080\", \"description\": \"\", \"id\": 4015178, \"is_active\": false, \"long_name\": \"OverNight Weekend 1\", \"short_name\": \"\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.48, -74.465127, 40.525106, -74.42872], \"color\": \"000080\", \"description\": \"\", \"id\": 4015180, \"is_active\": false, \"long_name\": \"OverNight Weekend 2\", \"short_name\": \"\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.499616, -74.466153, 40.523938, -74.448202], \"color\": \"FF00FF\", \"description\": \"\", \"id\": 4015284, \"is_active\": false, \"long_name\": \"Exam\", \"short_name\": \"A\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.519863, -74.465127, 40.525106, -74.433567], \"color\": \"DAA520\", \"description\": \"\", \"id\": 4015286, \"is_active\": false, \"long_name\": \"Exam\", \"short_name\": \"B-He\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.48, -74.452402, 40.5039, -74.42872], \"color\": \"FF8000\", \"description\": \"\", \"id\": 4015288, \"is_active\": false, \"long_name\": \"Exam\", \"short_name\": \"EE\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.481294, -74.44883, 40.5039, -74.436266], \"color\": \"FF0000\", \"description\": \"\", \"id\": 4015290, \"is_active\": false, \"long_name\": \"Exam\", \"short_name\": \"F\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.499616, -74.466153, 40.523747, -74.448202], \"color\": \"0000FF\", \"description\": \"\", \"id\": 4015292, \"is_active\": false, \"long_name\": \"Exam\", \"short_name\": \"H\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.499616, -74.452402, 40.525106, -74.43663], \"color\": \"CC99FF\", \"description\": \"\", \"id\": 4015294, \"is_active\": false, \"long_name\": \"Exam\", \"short_name\": \"LX\", \"text_color\": \"FFFFFF\", \"type\": \"bus\", \"url\": \"\"}, {\"agency_id\": 1323, \"bounds\": [40.519863, -74.464221, 40.525106, -74.433567], \"color\": \"FFD700\", \"description\": \"\", \"id\": 4015298, \"is_active\": false, \"long_name\": \"Exam\", \"short_name\": \"B\", \"text_color\": \"000000\", \"type\": \"bus\", \"url\": \"\"}], \"success\": true}").getJSONArray("routes");
		} catch (JSONException e) {e.printStackTrace();}
	}
	
	public static void main(String[] args) throws Exception {
		updateTransLocData();
	}
	
	public static List<ArrivalNode> getArrivalNodesMatching(String routeID, String stopID) {
		return arrivalNodes.stream().filter(c->c.matches(routeID, stopID)).collect(Collectors.toList());
	}
	
	public static void updateTransLocData() {
		try {
			String x = executeGet("https://feeds.transloc.com/3/vehicle_statuses?agencies=1323&include_arrivals=true");
//			System.err.println(x);
			JSONObject transLocData = new JSONObject(x);
			
			
			JSONArray arrivals = transLocData.getJSONArray("arrivals");
			
			arrivalNodes.clear();
			
			for(int i = 0; i < arrivals.length(); i++) {
				JSONObject a = arrivals.getJSONObject(i);
				ArrivalNode arrivalNode = new ArrivalNode(a);
				arrivalNodes.add(arrivalNode);
				
//				System.err.println(arrivalNode.getDateFormated() + "   " + arrivalNode.getDate());
			}
			
			
			
		}catch(Exception e) {
			e.printStackTrace();
		}
	}

	public static String executeGet(String targetURL) throws IOException {

		URL url = new URL(targetURL);
		URLConnection yc = url.openConnection();
		BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
		String x = "";
		String inputLine;

		while ((inputLine = in.readLine()) != null)
			x+=inputLine;
//			System.out.println(inputLine);
		in.close();
		
		return x;

	}
	
	public static String routeIDToName(String routeID) {
		try {
			for(int i = 0; i < routes.length(); i++) {
				if(routes.getJSONObject(i).getInt("id") == Integer.parseInt(routeID))
					return routes.getJSONObject(i).getString("long_name");
			}
		}catch(Exception e) {
			e.printStackTrace();
		}
		return null;
	}
	
	public static String stopIDToName(String stopID) {
		try {
			for(int i = 0; i < stops.length(); i++) {
				if(stops.getJSONObject(i).getInt("id") == Integer.parseInt(stopID))
					return stops.getJSONObject(i).getString("name");
			}
		}catch(Exception e) {
			e.printStackTrace();
		}
		return null;
	}
}
